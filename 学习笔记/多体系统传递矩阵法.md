# ä¸€ã€å¤šä½“ç³»ç»ŸåŠ¨åŠ›å­¦åŸºç¡€
### çŸ¢é‡ä»£æ•°ä¸åæ ‡ç³» (Vector Algebra & Coordinate Systems)

#### 1. å³æ‰‹ç¬›å¡å°”åæ ‡ç³»ä¸‹çš„å•ä½çŸ¢é‡åŸº

è®¾ $\vec{e}_1, \vec{e}_2, \vec{e}_3$ æ˜¯ $x, y, z$ è½´ä¸Šçš„å•ä½çŸ¢é‡åŸºï¼Œæ»¡è¶³å³æ‰‹æ³•åˆ™ã€‚

|**è¿ç®—**|**æ•°å­¦å®šä¹‰**|**çŸ©é˜µ/å¼ é‡å½¢å¼**|**å¤‡æ³¨**|
|---|---|---|---|
|**ç‚¹ç§¯ (Dot Product)**|$\vec{e}_m \cdot \vec{e}_n = \delta_{mn}$|$\vec{e}^T \cdot \vec{e} = 3$|$\delta_{mn}$ æ˜¯å…‹ç½—å†…å…‹ç¬¦å·|
|**å‰ç§¯ (Cross Product)**|$\vec{e}_m \times \vec{e}_n = \varepsilon_{mnl}\vec{e}_l$|$\vec{e}^T \times \vec{e} = \mathbf{0}$|$\varepsilon_{mnl}$ æ˜¯æ’åˆ—ç¬¦å·|
|**å¼ é‡ç§¯ (Outer Product)**|N/A|$\vec{e} \cdot \vec{e}^T = \mathbf{I}_3$|$\mathbf{I}_3$ æ˜¯ 3 é˜¶å•ä½çŸ©é˜µ|

#### 2. çŸ¢é‡è¿ç®—çš„çŸ©é˜µè¡¨ç¤º

è®¾çŸ¢é‡ $\vec{u}$ çš„åæ ‡åˆ—å‘é‡ä¸º $\mathbf{u} = [u_1, u_2, u_3]^T$ã€‚

| **è¿ç®—**   | **çŸ¢é‡è¡¨è¾¾å¼**                | **çŸ©é˜µ/åæ ‡è¡¨è¾¾å¼**                                                                 |
| -------- | ------------------------ | ---------------------------------------------------------------------------- |
| **çŸ¢é‡è¡¨ç¤º** | $\vec{u}$                | $\vec{u} = \vec{e}^T \mathbf{u} = \mathbf{u}^T \vec{e}$                      |
| **ç‚¹ç§¯**   | $\vec{u} \cdot \vec{v}$  | $\mathbf{u}^T \mathbf{v}$                                                    |
| **å‰ç§¯**   | $\vec{u} \times \vec{v}$ | $\vec{e}^T \tilde{\mathbf{u}} \mathbf{v}$ (æˆ– $\mathbf{u} \times \mathbf{v}$) |

##### æ‰­æ›²çŸ©é˜µ (Tilde Operator) $\tilde{\mathbf{u}}$

å¯¹äºä»»æ„çŸ¢é‡ $\mathbf{u}$ï¼Œå®šä¹‰ $\tilde{\mathbf{u}}$ ä¸ºä¸€ä¸ª**åå¯¹ç§°çŸ©é˜µ (Skew-Symmetric Matrix)**ï¼š

$$\mathbf{u} = \begin{bmatrix} u_1 \\ u_2 \\ u_3 \end{bmatrix} \implies \tilde{\mathbf{u}} = \begin{bmatrix} 0 & -u_3 & u_2 \\ u_3 & 0 & -u_1 \\ -u_2 & u_1 & 0 \end{bmatrix}$$

**é‡è¦æ€§è´¨**ï¼šçŸ¢é‡å‰ç§¯ $\vec{u} \times \vec{v}$ å¯ä»¥ç­‰ä»·äº $\tilde{\mathbf{u}} \mathbf{v}$ çš„çŸ©é˜µä¹˜æ³•ã€‚

#### 3. æ–¹å‘ä½™å¼¦çŸ©é˜µ(Direction Cosine Matrix)

è®¾æœ‰ä¸¤ä¸ªåæ ‡ç³» $i$ å’Œ $j$ï¼Œå…¶å•ä½çŸ¢é‡åˆ†åˆ«ä¸º $\vec{e}_i$ å’Œ $\vec{e}_j$ã€‚

- å˜æ¢å…³ç³»ï¼šä¸€ä¸ªåæ ‡ç³»çš„åŸºçŸ¢é‡å¯ä»¥è¡¨ç¤ºä¸ºå¦ä¸€ä¸ªåæ ‡ç³»åŸºçŸ¢é‡çš„çº¿æ€§ç»„åˆï¼š $$(\vec{e}_i)_m = \sum_{n=1}^3 a_{mn}(\vec{e}_j)_n$$
- ç³»æ•° $a_{mn}$ (æ–¹å‘ä½™å¼¦)ï¼šæ˜¯ä¸¤ä¸ªåŸºçŸ¢é‡ä¹‹é—´çš„å¤¹è§’ä½™å¼¦ï¼š$$a_{mn} = \vec{e}_m^{(i)} \cdot \vec{e}_n^{(j)} = \cos(\vec{e}_m^{(i)}, \vec{e}_n^{(j)})$$
- æ–¹å‘ä½™å¼¦çŸ©é˜µ $\mathbf{A}_{ij}$ï¼šç”±æ‰€æœ‰æ–¹å‘ä½™å¼¦ç»„æˆçš„ $3 \times 3$ çŸ©é˜µï¼Œå®ƒå®šä¹‰äº†åæ ‡ç³» $i$ åˆ° $j$ çš„å˜æ¢$$\mathbf{A}_{ij} = \vec{e}_i \cdot \vec{e}_j^T$$
- DCMçš„æ€§è´¨ï¼š
1.ä¸¤ä¸ªæ–¹å‘ç›¸åŒçš„åæ ‡ç³»ä¹‹é—´çš„æ–¹å‘ä½™å¼¦çŸ©é˜µæ˜¯å•ä½çŸ©é˜µï¼›

2. æ–¹å‘ä½™å¼¦çŸ©é˜µçš„é€†çŸ©é˜µç­‰äºå…¶è½¬ç½®ï¼Œä¸ºæ­£äº¤çŸ©é˜µï¼›

3.æ–¹å‘ä½™å¼¦çŸ©é˜µä¸­çš„ä»»æ„å…ƒç´ ç­‰äºå…¶ä»£æ•°ä½™å­å¼ï¼›

4.æ–¹å‘ä½™å¼¦çŸ©é˜µçš„è¡Œåˆ—å¼çš„å€¼ä¸ºæ­£1ï¼›

5.æ–¹å‘ä½™å¼¦çŸ©é˜µä¸­ä¹ä¸ªå…ƒç´ åªæœ‰ä¸‰ä¸ªæ˜¯ç‹¬ç«‹çš„ï¼›

6.åŒä¸€çŸ¢é‡åœ¨ä¸åŒåæ ‡ç³»ä¸­çš„åæ ‡è¡¨ç¤ºæ»¡è¶³

7.ä»»æ„ä¸¤ä¸ªåæ ‡ç³» i å’Œ jä¹‹é—´çš„æ–¹å‘ä½™å¼¦çŸ©é˜µÂ ${\bf{A}}_{ij}$éƒ½æœ‰ä¸€ä¸ªå® ç‰¹å¾å€¼ 1ï¼Œå³å­˜åœ¨ä¸€ä¸ªå®æ•°å½¢å¼çš„ç‰¹å¾çŸ¢é‡ğ’“ ï¼Œè¯¥ç‰¹å¾å‘ é‡æ»¡è¶³$\mathbf{r}=\bf{A}_{ij}\mathbf{r}$
### éš”ç¦»ä½“çš„å—åŠ›å…³ç³»

æ ¸å¿ƒï¼šè”æ¥ç‚¹$\mathbf{P}$æ»¡è¶³æ’ç­‰å…³ç³»$\mathbf{O}^{i}=\mathbf{I}^{j}$å’Œç‰›é¡¿ç¬¬ä¸‰å®šå¾‹å³å¯å¾—æ’ç­‰å¼
${\bf{r}} \equiv {\bf{r}}_o^i \equiv {\bf{r}}_I^j$
${\bf{A}} \equiv {\bf{A}}_o^i \equiv {\bf{A}}_I^j$
${\bf{q}} \equiv {\bf{q}}_o^i \equiv {\bf{q}}_I^j$
${\bf{m}} \equiv {\bf{m}}_o^i \equiv {\bf{m}}_I^j$

### éš”ç¦»ä½“çš„ç‰›é¡¿-æ¬§æ‹‰æ–¹ç¨‹
#### è¿åŠ¨å­¦å…³ç³»ï¼š
${{\bf{\ddot r}}_{\bf{O}}}{\bf{ = }}{{\bf{\ddot r}}_{\bf{I}}}{\bf{ - \tilde r}}{{\bf{\omega }}_{\bf{I}}}{\bf{ + }}{{\bf{\tilde \omega }}_{\bf{I}}}{{\bf{\tilde \omega }}_{\bf{I}}}{{\bf{r}}_{{\bf{IO}}}}$
${{\bf{\dot \omega }}_{\bf{O}}}{\bf{ = }}{{\bf{\dot \omega }}_{\bf{I}}}$

#### åŠ¨åŠ›å­¦å…³ç³»ï¼š
${{\mathbf{q}}_{\bf{O}}} =  - m{{\mathbf{\ddot r}}_I} + m{{\mathbf{\tilde r}}_{{\bf{IC}}}}{{\mathbf{\dot \omega }}_{\bf{I}}} + {{\mathbf{q}}_{\bf{I}}} + {{\mathbf{f}}_{\bf{C}}} - m{{\mathbf{\tilde \omega }}_{\bf{I}}}{{\mathbf{\tilde \omega }}_{\bf{I}}}{{\bf{r}}_{{\bf{IC}}}}$
${{\bf{m}}_{\bf{o}}} = m{{\bf{\tilde r}}_{{\bf{I}}{\rm{O}}}}{{\bf{\ddot r}}_I} + ({\bf{A}}{{\bf{J}}_{\bf{I}}}^\prime {{\bf{A}}^{\bf{T}}}{\bf{ + }}m{{\bf{\tilde r}}_{{\bf{IO}}}}{{\bf{\tilde r}}_{{\bf{IC}}}}){{\bf{\dot \omega }}_I} + {{\bf{m}}_{\bf{I}}} + {{\bf{\tilde r}}_{{\bf{I}}{\rm{O}}}}{{\bf{q}}_I} + {{\bf{\tilde \omega }}_I}{\bf{A}}{{\bf{J}}_{\bf{I}}}^\prime {{\bf{A}}^{\bf{T}}}{{\bf{\tilde \omega }}_I} - m{{\bf{\tilde r}}_{IO}}{{\bf{\tilde \omega }}_{\bf{I}}}{{\bf{\tilde \omega }}_{\bf{I}}}{{\bf{r}}_{{\bf{IC}}}} - {{\bf{m}}_{\bf{c}}}{\rm{ + }}{{\bf{r}}_{{\bf{CO}}}}{{\bf{f}}_{\bf{c}}}$

#### çŠ¶æ€çŸ¢é‡ï¼š
${\bf{z}} = {\left[ {{{{\bf{\ddot r}}}^{\bf{T}}}\quad {{{\bf{\dot \omega }}}^{\bf{T}}}\quad {{\bf{m}}^{\bf{T}}}\quad {{\bf{q}}^{\bf{T}}}\quad 1} \right]^T}$

#### å…ƒä»¶ä¼ é€’æ–¹ç¨‹ï¼š
${{\bf{z}}_{\bf{o}}}\left( {\bf{t}} \right){\bf{ = U}}\left( {\bf{t}} \right){{\bf{z}}_{\bf{I}}}\left( {\bf{t}} \right)$

# äºŒã€å…ƒä»¶å’Œå­ç³»ç»Ÿä¼ é€’æ–¹ç¨‹
å•ç«¯è¾“å…¥åˆšä½“
$\begin{bmatrix} \dot{\mathbf{r}} \\ \dot{\boldsymbol{\omega}} \\ \mathbf{m} \\ \dot{\mathbf{q}} \\ 0 \end{bmatrix}_O = \begin{bmatrix} \mathbf{I}_{3 \times 3} & -\tilde{\mathbf{r}}_{IO} & \mathbf{O}_{3 \times 3} & \mathbf{O}_{3 \times 3} & \tilde{\boldsymbol{\omega}}\mathbf{r}_{IO} \\ \mathbf{O}_{3 \times 3} & \mathbf{I}_{3 \times 3} & \mathbf{O}_{3 \times 3} & \mathbf{O}_{3 \times 3} & \mathbf{O}_{3 \times 1} \\ m\mathbf{r}_{CO}^T & A\mathbf{J}_I^{-1}A^T + m\tilde{\mathbf{r}}_{IO}\tilde{\mathbf{r}}_{IC} & \mathbf{I}_{3 \times 3} & \tilde{\mathbf{r}}_{IO} & \tilde{\boldsymbol{\omega}}A\mathbf{J}_I^{-1}A^T\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} - m\tilde{\mathbf{r}}_{IO}\tilde{\boldsymbol{\omega}}\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} - \mathbf{m}_t + \mathbf{r}_{CO}\mathbf{f}_C \\ -m\mathbf{I}_{3 \times 3} & m\tilde{\mathbf{r}}_{IC} & \mathbf{O}_{3 \times 3} & \mathbf{I}_{3 \times 3} & \mathbf{f}_C - m\tilde{\boldsymbol{\omega}}\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} \\ \mathbf{O}_{1 \times 3} & \mathbf{O}_{1 \times 3} & \mathbf{O}_{1 \times 3} & \mathbf{O}_{1 \times 3} & 1 \end{bmatrix} \begin{bmatrix} \dot{\mathbf{r}} \\ \boldsymbol{\omega} \\ \mathbf{m} \\ \mathbf{q} \\ 1 \end{bmatrix}_I$
$$\mathbf{U}_{3,2} = A\mathbf{J}_I^{-1}A^T + m\tilde{\mathbf{r}}_{IO}\tilde{\mathbf{r}}_{IC}$$
$$\mathbf{U}_{3,5} = \tilde{\boldsymbol{\omega}}A\mathbf{J}_I^{-1}A^T\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} - m\tilde{\mathbf{r}}_{IO}\tilde{\boldsymbol{\omega}}\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} - \mathbf{m}_t + \mathbf{r}_{CO}\mathbf{f}_C$$
ç®€åŒ–åçš„çŸ©é˜µå½¢å¼ï¼š$$\mathbf{U}^R = \begin{bmatrix} \mathbf{I} & -\tilde{\mathbf{r}}_{IO} & \mathbf{O} & \mathbf{O} & \tilde{\boldsymbol{\omega}}\mathbf{r}_{IO} \\ \mathbf{O} & \mathbf{I} & \mathbf{O} & \mathbf{O} & \mathbf{O} \\ m\mathbf{r}_{CO}^T & \mathbf{U}_{3,2} & \mathbf{I} & \tilde{\mathbf{r}}_{IO} & \mathbf{U}_{3,5} \\ -m\mathbf{I} & m\tilde{\mathbf{r}}_{IC} & \mathbf{O} & \mathbf{I} & \mathbf{f}_C - m\tilde{\boldsymbol{\omega}}\tilde{\boldsymbol{\omega}}_I\mathbf{r}_{IC} \\ \mathbf{O} & \mathbf{O} & \mathbf{O} & \mathbf{O} & 1 \end{bmatrix}$$
